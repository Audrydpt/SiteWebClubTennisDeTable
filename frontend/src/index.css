@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--border, currentcolor);
  }
  button:not([disabled]),
  [role='button']:not([disabled]) {
    cursor: pointer;
  }

  /* Styles de base pour le site */
  html,
  body {
    font-size: 16px; /* Empêcher le zoom iOS sur les inputs */
    height: 100%;
    margin: 0;
    padding: 0;
  }

  #root {
    min-height: 100%;
    display: flex;
    flex-direction: column;
  }

  /* Utiliser dvh pour les appareils mobiles modernes */
  @supports (height: 100dvh) {
    html,
    body {
      height: 100dvh;
    }

    #root {
      min-height: 100dvh;
    }
  }

  /* Safari iOS - utiliser -webkit-fill-available */
  @supports (-webkit-touch-callout: none) {
    html,
    body {
      height: -webkit-fill-available;
    }
  }

  /* Styles appliqués UNIQUEMENT pour la caisse en mode plein écran sur tablette */
  html.caisse-fullscreen-mode,
  body.caisse-fullscreen-mode {
    overflow: hidden;
    height: 100dvh;
    position: fixed;
    width: 100%;
    overscroll-behavior: none;
  }

  html.caisse-fullscreen-mode #root {
    height: 100dvh;
    overflow: hidden;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  /* Fallback pour navigateurs plus anciens */
  @supports not (height: 100dvh) {
    html.caisse-fullscreen-mode,
    body.caisse-fullscreen-mode,
    html.caisse-fullscreen-mode #root {
      height: 100vh;
    }
  }

  /* Safari iOS */
  @supports (-webkit-touch-callout: none) {
    html.caisse-fullscreen-mode,
    body.caisse-fullscreen-mode,
    html.caisse-fullscreen-mode #root {
      height: -webkit-fill-available;
    }
  }

  /* Désactiver les comportements tactiles uniquement en mode caisse */
  html.caisse-fullscreen-mode * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* Permettre la sélection dans les inputs en mode caisse */
  html.caisse-fullscreen-mode input,
  html.caisse-fullscreen-mode textarea {
    -webkit-user-select: text;
    user-select: text;
  }
}

:root {
  --black: hsl(0 0% 0%);
  --dark-gray: hsl(
    210 10.8% 14.5%
  ); /* Main ChapsVision Theme #212529 texte, titre (ANTHRACITE) */
  --light-gray: hsl(
    210 13% 91%
  ); /* Main ChapsVision Theme #E5E8EB forme et background (ARGENT) */
  --white: hsl(0 0% 100%);
  --green: hsl(
    186.5 47% 42.2%
  ); /* Main ChapsVision Theme #39939E titre, élément à faire ressortir, kpi (CALANQUES)*/
  --yellow: hsl(
    40.2 81.5% 57.6%
  ); /* Main ChapsVision Theme #EBB13B couleur secondaire, petite touches (POUSSIN) */
  --red: hsl(358 64.7% 54.5%);
  --blue: hsl(
    204.8 53.8% 48.4%
  ); /* Main ChapsVision Theme #3987BE HAPPYCAP FOUNDATION (BLEU)*/
  --purple: hsl(347.4 78.4% 65.5%);
  /* Main ChapsVision Theme #EC627F HAPPYCAP FOUNDATION (ROSÉ)*/
  --background: var(--white);
  --foreground: var(--dark-gray);
  --primary: var(--green);
  --primary-foreground: var(--white);
  --secondary: var(--yellow);
  --secondary-foreground: var(--white);

  --accent: var(--light-gray);
  --accent-foreground: var(--dark-gray);
  --muted: var(--light-gray);
  --muted-foreground: var(--dark-gray);

  --card: var(--white);
  --card-foreground: var(--dark-gray);

  --destructive: var(--red);
  --destructive-foreground: var(--white);

  --popover: var(--white);
  --popover-foreground: var(--dark-gray);

  --border: var(--light-gray);
  --input: var(--dark-gray);
  --ring: var(--dark-gray);

  --chart-1: var(--green);
  --chart-2: var(--yellow);
  --chart-3: var(--red);
  --chart-4: var(--blue);
  --chart-5: var(--purple);

  --radius: 0.5rem;

  --sidebar-background: var(--light-gray);
  --sidebar-foreground: var(--dark-gray);
  --sidebar-primary: var(--green);
  --sidebar-primary-foreground: var(--white);
  --sidebar-accent: var(--green);
  --sidebar-accent-foreground: var(--white);
  --sidebar-border: var(--dark-gray);
  --sidebar-ring: var(--dark-gray);
  --sidebar: hsl(0 0% 98%);
}
.dark {
  --background: var(--dark-gray);
  --foreground: var(--white);

  --accent: var(--black);
  --accent-foreground: var(--white);
  --muted: var(--black);
  --muted-foreground: var(--white);

  --card: var(--dark-gray);
  --card-foreground: var(--white);

  --popover: var(--dark-gray);
  --popover-foreground: var(--white);

  --border: var(--light-gray);
  --input: var(--white);
  --ring: var(--white);

  --chart-1: var(--green);
  --chart-2: var(--yellow);
  --chart-3: var(--red);
  --chart-4: var(--blue);
  --chart-5: var(--purple);

  --radius: 0.5rem;

  --sidebar-background: var(--dark-gray);
  --sidebar-foreground: var(--light-gray);
  --sidebar-primary: var(--green);
  --sidebar-primary-foreground: var(--white);
  --sidebar-accent: var(--green);
  --sidebar-accent-foreground: var(--white);
  --sidebar-border: var(--dark-gray);
  --sidebar-ring: var(--dark-gray);
  --sidebar: hsl(240 5.9% 10%);
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }

  /* Assurer que le footer est toujours visible sur mobile */
  footer {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
  }

  /* Gestion du safe-area pour les iPhone avec encoche */
  @supports (padding: max(0px)) {
    body {
      padding-bottom: env(safe-area-inset-bottom);
    }
  }
}

/* Classe utilitaire pour le padding bottom sécurisé */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0);
}
